# m3u8-sniffer

Chromeで流れる動画（m3u8形式）のURLを自動で拾って、JSONL形式で保存するための自作拡張機能です。
「デベロッパーツールをずっと開いておくのは面倒」「後でまとめてURLを解析したい」という時に使ってください。

## これでできること

- ブラウザで発生した `.m3u8` 通信をバックグラウンドで監視します。
- 通信が発生した時の「ページのタイトル」と「URL」をセットで記録します。
- 拡張機能のアイコンをクリックするだけで、溜まったログを `.jsonl` ファイルで書き出せます。

## ファイル構成

同じフォルダに以下の3つのファイルを置いてください。

1.  `manifest.json`：拡張機能の設定ファイル
2.  `background.js`：通信を監視してログを貯める本体
3.  `README.md`：これ（使い方のメモ）

## 使い方（導入手順）

### 1. 準備

1. ChromeのURLバーに `chrome://extensions/` を入力して開きます。
2. 右上の「**デベロッパーモード**」をオンにします。
3. 「**パッケージ化されていない拡張機能を読み込む**」をクリックして、これらのファイルが入ったフォルダを選択してください。

### 2. キャプチャする

1. 拡張機能を読み込んだら、動画サイトなどを閲覧します。
2. そのまま普通にブラウジングしているだけで、バックグラウンドで `.m3u8` 通信を勝手に記録してくれます。
3. 動作を確認したいときは、拡張機能カードの「サービスワーカー」をクリックしてコンソールを見てください。

### 3. 保存する

1. Chrome右上のパズルアイコン（拡張機能メニュー）から、このツールのアイコンをクリックします。
2. 保存ダイアログが出るので、好きな場所に `.jsonl` ファイルを保存してください。

## データの構造（JSONL）

保存されたファイルは1行ごとに1つのデータが入っています。

```json
{
  "timestamp": "2026-02-06T01:50:00Z",
  "title": "動画のタイトル",
  "url": "https://.../index.m3u8",
  "method": "GET"
}
```
